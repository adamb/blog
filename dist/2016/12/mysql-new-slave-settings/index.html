<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MySQL New Slave Settings - Adam's Blog</title>
  <link rel="icon" type="image/png" href="/assets/blogico.png" />
  <link rel="shortcut icon" href="/assets/blogico.png" />
  <link rel="apple-touch-icon" href="/assets/blogico.png" />
  <script src="/assets/htmx.min.js"></script>
  <link rel="stylesheet" href="/assets/style.css" />
  <script>
    // Track page visits
    function trackVisit() {
      fetch('/track', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      }).catch(err => console.log('Tracking failed:', err));
    }

    // Track initial page load
    document.addEventListener('DOMContentLoaded', trackVisit);

    // Track HTMX navigation (but not visit counter requests)
    document.addEventListener('htmx:afterRequest', function(evt) {
      if (evt.detail.successful && 
          evt.detail.requestConfig && 
          evt.detail.requestConfig.url && 
          !evt.detail.requestConfig.url.includes('/visits') &&
          !evt.detail.requestConfig.url.includes('/transform')) {
        trackVisit();
      }
    });
  </script>
</head>
<body>
  <header>
    <h1><a href="/" style="text-decoration: none; color: inherit;">Adam's Blog</a></h1>
    <nav>
      
    </nav>
  </header>

  <main id="content">
    <article>
    <div id="post-content"><h1>MySQL New Slave Settings</h1>
<p><em>December 20, 2016 ‚Ä¢ <span class="visit-counter" hx-get="/visits?path=%2F2016%2F12%2Fmysql-new-slave-settings%2F" hx-trigger="load" hx-swap="innerHTML">
<span class="visit-count">üëÅÔ∏è Loading...</span>
</span></em></p>
<p>I can never remember which fields are important. It's the <code>master_log_file</code> and <code>master_log_pos</code> but these come from <code>show slave status</code>. <code>Master_log_file</code> is from <code>master_log_file</code> but <code>master_log_pos</code> comes from <code>exec_master_pos</code>.</p>
<pre><code class="language-sql">CHANGE MASTER TO master_user = 'dbp3',   
  MASTER_PASSWORD='...',   
  master_log_file=&quot;mysql-bin.006818&quot;,   
  master_log_pos=234867554;  
  
stop slave;  
mysql&gt; show slave status \G
</code></pre>
<p>The output shows key details like:</p>
<ul>
<li><code>Master_Log_File</code>: mysql-bin.006818</li>
<li><code>Exec_Master_Log_Pos</code>: 234867554</li>
<li><code>Slave_IO_Running</code>: No</li>
<li><code>Slave_SQL_Running</code>: No</li>
</ul>
<p>Note the important fields for configuring MySQL replication, particularly the log file and position.</p>
</div>
    
    <div class="tone-controls">
      <h3>üé≠ Transform This Post</h3>
      <div class="tone-buttons">
        <button onclick="transformPost('sarcastic')" class="tone-btn">
          üòè Sarcastic
        </button>
        <button onclick="transformPost('techbro')" class="tone-btn">
          üöÄ Tech Bro
        </button>
        <button onclick="transformPost('ubersnarky')" class="tone-btn">
          üò§ Uber Snarky
        </button>
        <button onclick="restoreOriginal()" class="tone-btn restore-btn">
          üîÑ Original
        </button>
      </div>
      <div id="loading-indicator" class="loading-indicator" style="display: none;">
        <span class="loading-text">ü§ñ AI is thinking... probably judging your writing style...</span>
      </div>
    </div>
    
    <script>
      // Store original content and markdown
      window.originalContent = "<h1>MySQL New Slave Settings</h1>\n<p><em>December 20, 2016 ‚Ä¢ <span class=\"visit-counter\" hx-get=\"/visits?path=%2F2016%2F12%2Fmysql-new-slave-settings%2F\" hx-trigger=\"load\" hx-swap=\"innerHTML\">\n<span class=\"visit-count\">üëÅÔ∏è Loading...</span>\n</span></em></p>\n<p>I can never remember which fields are important. It's the <code>master_log_file</code> and <code>master_log_pos</code> but these come from <code>show slave status</code>. <code>Master_log_file</code> is from <code>master_log_file</code> but <code>master_log_pos</code> comes from <code>exec_master_pos</code>.</p>\n<pre><code class=\"language-sql\">CHANGE MASTER TO master_user = 'dbp3',   \n  MASTER_PASSWORD='...',   \n  master_log_file=&quot;mysql-bin.006818&quot;,   \n  master_log_pos=234867554;  \n  \nstop slave;  \nmysql&gt; show slave status \\G\n</code></pre>\n<p>The output shows key details like:</p>\n<ul>\n<li><code>Master_Log_File</code>: mysql-bin.006818</li>\n<li><code>Exec_Master_Log_Pos</code>: 234867554</li>\n<li><code>Slave_IO_Running</code>: No</li>\n<li><code>Slave_SQL_Running</code>: No</li>\n</ul>\n<p>Note the important fields for configuring MySQL replication, particularly the log file and position.</p>\n";
      window.originalMarkdown = "\n# MySQL New Slave Settings\n\nI can never remember which fields are important. It's the `master_log_file` and `master_log_pos` but these come from `show slave status`. `Master_log_file` is from `master_log_file` but `master_log_pos` comes from `exec_master_pos`.\n\n```sql\nCHANGE MASTER TO master_user = 'dbp3',   \n  MASTER_PASSWORD='...',   \n  master_log_file=\"mysql-bin.006818\",   \n  master_log_pos=234867554;  \n  \nstop slave;  \nmysql> show slave status \\G\n```\n\nThe output shows key details like:\n- `Master_Log_File`: mysql-bin.006818\n- `Exec_Master_Log_Pos`: 234867554\n- `Slave_IO_Running`: No\n- `Slave_SQL_Running`: No\n\nNote the important fields for configuring MySQL replication, particularly the log file and position.";
      
      function restoreOriginal() {
        document.getElementById('post-content').innerHTML = window.originalContent;
        document.getElementById('loading-indicator').style.display = 'none';
      }
      
      async function transformPost(tone) {
        console.log('transformPost called with tone:', tone);
        
        // Show loading indicator
        const loadingIndicator = document.getElementById('loading-indicator');
        console.log('Loading indicator element:', loadingIndicator);
        if (loadingIndicator) {
          loadingIndicator.style.display = 'block';
        }
        
        try {
          const response = await fetch('/transform', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              tone: tone,
              content: window.originalMarkdown
            })
          });
          
          if (response.ok) {
            const data = await response.json();
            if (data.transformedContent) {
              // Convert markdown to HTML for transformed content
              let transformedHtml = data.transformedContent;
              
              // Convert headers (order matters - do h3 first)
              transformedHtml = transformedHtml.replace(/^### (.+)$/gm, '<h3>$1</h3>');
              transformedHtml = transformedHtml.replace(/^## (.+)$/gm, '<h2>$1</h2>');
              transformedHtml = transformedHtml.replace(/^# (.+)$/gm, '<h1>$1</h1>');
              
              // Convert bold and italic
              transformedHtml = transformedHtml.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
              transformedHtml = transformedHtml.replace(/\*([^*]+)\*/g, '<em>$1</em>');
              
              // Convert links
              transformedHtml = transformedHtml.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');
              
              // Convert simple line breaks and paragraphs
              transformedHtml = transformedHtml.replace(/\n\n/g, '</p><p>');
              transformedHtml = transformedHtml.replace(/\n/g, '<br>');
              transformedHtml = '<p>' + transformedHtml + '</p>';
              
              // Clean up empty paragraphs
              transformedHtml = transformedHtml.replace(/<p><\/p>/g, '');
              transformedHtml = transformedHtml.replace(/<p>(<h[1-6]>)/g, '$1');
              transformedHtml = transformedHtml.replace(/(<\/h[1-6]>)<\/p>/g, '$1');
              
              document.getElementById('post-content').innerHTML = 
                '<div class="transformed-content"><em>üé≠ ' + tone.charAt(0).toUpperCase() + tone.slice(1) + ' version:</em><br><br>' + 
                transformedHtml + '</div>';
            }
          } else {
            document.getElementById('post-content').innerHTML = 
              '<div class="transformed-content"><em>‚ùå Failed to transform content. Try again!</em></div>';
          }
        } catch (error) {
          console.error('Transformation error:', error);
          const postContent = document.getElementById('post-content');
          if (postContent) {
            postContent.innerHTML = 
              '<div class="transformed-content"><em>‚ùå Network error: ' + error.message + '</em></div>';
          }
        }
        
        // Hide loading indicator
        document.getElementById('loading-indicator').style.display = 'none';
      }
    </script>
  
    <div class="back-link"><a href="/">‚Üê Back to Home</a></div>
  </article>
  </main>

  <footer>
    <p><a href="/about">About</a> ‚Ä¢ ¬© 2025 Adam Beguelin</p>
  </footer>
</body>
</html>
